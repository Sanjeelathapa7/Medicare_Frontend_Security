{"ast":null,"code":"// import { jwtDecode } from \"jwt-decode\";\n// import React, { useEffect, useState } from \"react\";\n// import { Link } from \"react-router-dom\"; // Import Link\n// import { toast } from \"react-toastify\";\n// import { getUserProfileApi } from \"../../apis/Apis\";\n// // import \"../../css/profile.css\";\n\n// const Profile = () => {\n//     const user = JSON.parse(localStorage.getItem(\"user\"))\n//     const [userData, setUserData] = useState(null);\n//     const [loading, setLoading] = useState(true);\n//     const [profileImage, setProfileImage] = useState(null);\n//     // const [previewProfileImage, setPreviewProfileImage] = useState(null);\n\n//     useEffect(() => {\n//         const token = localStorage.getItem(\"token\");\n//         if (!token) {\n//             toast.error(\"Token not found. Please log in.\");\n//             setLoading(false);\n//             return;\n//         }\n\n//         const userId = decodeTokenAndGetUserId(token);\n//         if (!userId) {\n//             toast.error(\"Unable to verify your identity. Please log in again.\");\n//             setLoading(false);\n//             return;\n//         }\n\n//         getUserProfileApi(userId)\n//             .then((res) => {\n//                 if (res.data.success === true) {\n//                     setUserData(res.data.userProfile);\n//                     console.log(\"User ID:\", res.data);\n//                 } else {\n//                     toast.error(res.data.message);\n//                 }\n//             })\n//             .catch((err) => {\n//                 console.error(err);\n//                 toast.error(\"Error fetching user profile\");\n//             })\n//             .finally(() => {\n//                 setLoading(false);\n//             });\n//         console.log(\"User ID:\", userData?._id);\n//     }, []);\n\n//     const decodeTokenAndGetUserId = (token) => {\n//         try {\n//             const decodedToken = jwtDecode(token);\n//             return decodedToken.id;\n//         } catch (error) {\n//             console.error(\"Error decoding token:\", error.message);\n//             return null;\n//         }\n//     };\n\n//     // const handleProfileImageUpload = (event) => {\n//     //     const file = event.target.files[0];\n//     //     setProfileImage(file);\n//     //     setPreviewProfileImage(URL.createObjectURL(file));\n//     // };   \n\n//     return (\n//         <div className=\"d-flex flex-column align-items-center justify-content-center profile-page-container\">\n//             <h2 className=\"mb-2\">Welcome to Your Profile, {userData?.firstName}</h2>\n//             {loading ? (\n//                 <p className=\"loading-text\">Loading user data...</p>\n//             ) : userData ? (\n//                 <div className=\"d-flex flex-column align-items-center justify-content-center profile-details-container mt-5 shadow-lg\">\n//                     <div className=\"old-image-box mx-5 p-5 \">\n//                         {userData.profileImage ? (\n//                             <img\n//                                 src={userData.profileImage}\n//                                 alt=\"Old Profile Image\"\n//                                 className=\"old-profile-image rounded-circle shadow-lg\"\n//                                 style={{ objectFit: \"cover\", maxWidth: 200, maxHeight: 200 }}\n//                             />\n//                         ) : (\n//                             <img\n//                                 src=\"https://static.vecteezy.com/system/resources/previews/020/213/738/non_2x/add-profile-picture-icon-upload-photo-of-social-media-user-vector.jpg\"\n//                                 alt=\"Default Image\"\n//                                 className=\"old-profile-image rounded-circle\"\n//                                 style={{ objectFit: \"cover\", maxWidth: 300, maxHeight: 300 }}\n//                             />\n//                         )}\n//                     </div>\n\n//                     <div className=\"profile-details border-top \">\n//                         <p className=\"mt-3\">\n//                             <strong>First Name:</strong> {userData.firstName}\n//                         </p>\n//                         <p>\n//                             <strong>Last Name:</strong> {userData.lastName}\n//                         </p>\n//                         <p>\n//                             <strong>Contact Number:</strong> {userData.contact}\n//                         </p>\n//                         <p>\n//                             <strong>Address:</strong> {userData.location}\n//                         </p>\n//                         <p>\n//                             <strong>Email:</strong> {userData.email}\n//                         </p>\n//                     </div>\n//                     {profileImage && (\n//                         <img\n//                             src={profileImage}\n//                             alt=\"Profile Preview\"\n//                             className=\"profile-image-preview rounded-circle\"\n//                             style={{ objectFit: \"cover\", maxWidth: 300, maxHeight: 300 }}\n//                         />\n//                     )}\n//                     <Link className=\"mb-2\" to={`/profile/edit/${userData.id}`}>\n//                         <button className=\"btn btn-lightbtn btn-outline-dark\">Edit Profile</button>\n//                     </Link>\n//                 </div>\n//             ) : (\n//                 <p className=\"error-text\">\n//                     Unable to fetch user data. Please try again later.\n//                 </p>\n//             )}\n//         </div>\n//     );\n// };\n\n// export default Profile;","map":{"version":3,"names":[],"sources":["C:/Users/Sanjeela/Desktop/Security_CW2/Frontend/src/pages/user/Profile.jsx"],"sourcesContent":["// import { jwtDecode } from \"jwt-decode\";\r\n// import React, { useEffect, useState } from \"react\";\r\n// import { Link } from \"react-router-dom\"; // Import Link\r\n// import { toast } from \"react-toastify\";\r\n// import { getUserProfileApi } from \"../../apis/Apis\";\r\n// // import \"../../css/profile.css\";\r\n\r\n// const Profile = () => {\r\n//     const user = JSON.parse(localStorage.getItem(\"user\"))\r\n//     const [userData, setUserData] = useState(null);\r\n//     const [loading, setLoading] = useState(true);\r\n//     const [profileImage, setProfileImage] = useState(null);\r\n//     // const [previewProfileImage, setPreviewProfileImage] = useState(null);\r\n\r\n//     useEffect(() => {\r\n//         const token = localStorage.getItem(\"token\");\r\n//         if (!token) {\r\n//             toast.error(\"Token not found. Please log in.\");\r\n//             setLoading(false);\r\n//             return;\r\n//         }\r\n\r\n//         const userId = decodeTokenAndGetUserId(token);\r\n//         if (!userId) {\r\n//             toast.error(\"Unable to verify your identity. Please log in again.\");\r\n//             setLoading(false);\r\n//             return;\r\n//         }\r\n\r\n//         getUserProfileApi(userId)\r\n//             .then((res) => {\r\n//                 if (res.data.success === true) {\r\n//                     setUserData(res.data.userProfile);\r\n//                     console.log(\"User ID:\", res.data);\r\n//                 } else {\r\n//                     toast.error(res.data.message);\r\n//                 }\r\n//             })\r\n//             .catch((err) => {\r\n//                 console.error(err);\r\n//                 toast.error(\"Error fetching user profile\");\r\n//             })\r\n//             .finally(() => {\r\n//                 setLoading(false);\r\n//             });\r\n//         console.log(\"User ID:\", userData?._id);\r\n//     }, []);\r\n\r\n//     const decodeTokenAndGetUserId = (token) => {\r\n//         try {\r\n//             const decodedToken = jwtDecode(token);\r\n//             return decodedToken.id;\r\n//         } catch (error) {\r\n//             console.error(\"Error decoding token:\", error.message);\r\n//             return null;\r\n//         }\r\n//     };\r\n\r\n//     // const handleProfileImageUpload = (event) => {\r\n//     //     const file = event.target.files[0];\r\n//     //     setProfileImage(file);\r\n//     //     setPreviewProfileImage(URL.createObjectURL(file));\r\n//     // };   \r\n\r\n//     return (\r\n//         <div className=\"d-flex flex-column align-items-center justify-content-center profile-page-container\">\r\n//             <h2 className=\"mb-2\">Welcome to Your Profile, {userData?.firstName}</h2>\r\n//             {loading ? (\r\n//                 <p className=\"loading-text\">Loading user data...</p>\r\n//             ) : userData ? (\r\n//                 <div className=\"d-flex flex-column align-items-center justify-content-center profile-details-container mt-5 shadow-lg\">\r\n//                     <div className=\"old-image-box mx-5 p-5 \">\r\n//                         {userData.profileImage ? (\r\n//                             <img\r\n//                                 src={userData.profileImage}\r\n//                                 alt=\"Old Profile Image\"\r\n//                                 className=\"old-profile-image rounded-circle shadow-lg\"\r\n//                                 style={{ objectFit: \"cover\", maxWidth: 200, maxHeight: 200 }}\r\n//                             />\r\n//                         ) : (\r\n//                             <img\r\n//                                 src=\"https://static.vecteezy.com/system/resources/previews/020/213/738/non_2x/add-profile-picture-icon-upload-photo-of-social-media-user-vector.jpg\"\r\n//                                 alt=\"Default Image\"\r\n//                                 className=\"old-profile-image rounded-circle\"\r\n//                                 style={{ objectFit: \"cover\", maxWidth: 300, maxHeight: 300 }}\r\n//                             />\r\n//                         )}\r\n//                     </div>\r\n\r\n\r\n\r\n//                     <div className=\"profile-details border-top \">\r\n//                         <p className=\"mt-3\">\r\n//                             <strong>First Name:</strong> {userData.firstName}\r\n//                         </p>\r\n//                         <p>\r\n//                             <strong>Last Name:</strong> {userData.lastName}\r\n//                         </p>\r\n//                         <p>\r\n//                             <strong>Contact Number:</strong> {userData.contact}\r\n//                         </p>\r\n//                         <p>\r\n//                             <strong>Address:</strong> {userData.location}\r\n//                         </p>\r\n//                         <p>\r\n//                             <strong>Email:</strong> {userData.email}\r\n//                         </p>\r\n//                     </div>\r\n//                     {profileImage && (\r\n//                         <img\r\n//                             src={profileImage}\r\n//                             alt=\"Profile Preview\"\r\n//                             className=\"profile-image-preview rounded-circle\"\r\n//                             style={{ objectFit: \"cover\", maxWidth: 300, maxHeight: 300 }}\r\n//                         />\r\n//                     )}\r\n//                     <Link className=\"mb-2\" to={`/profile/edit/${userData.id}`}>\r\n//                         <button className=\"btn btn-lightbtn btn-outline-dark\">Edit Profile</button>\r\n//                     </Link>\r\n//                 </div>\r\n//             ) : (\r\n//                 <p className=\"error-text\">\r\n//                     Unable to fetch user data. Please try again later.\r\n//                 </p>\r\n//             )}\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// export default Profile;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}